<?php
defined('BASEPATH') OR exit('No direct script access allowed');

class P extends CI_Controller {
		
	public function _remap($method){
        if(!is_numeric($method))
            redirect(base_url('s/'.$method));

        $data = $this->DBfile->get_data('shared',array('share_id'=>$method));
        if(empty($data))
            redirect(base_url());

        $str = '<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">';
        $str .= '<HTML><HEAD>';
        $str .= '<title>'.$data[0]['share_ques'].'</title>';
        $str .= '<meta name="description" content="'.$data[0]['share_ans'].'">';

        $str .= '<meta property="og:url" content="'.base_url().'p/'.$data[0]['share_id'].'" />';
        $str .= '<meta property="og:type" content="article" />';
        $str .= '<meta property="og:title" content="'.$data[0]['share_ques'].'" />';
        $str .= '<meta property="og:description" content="'.$data[0]['share_ans'].'" />';
        $str .= '<meta property="og:image" content="'.$data[0]['share_image'].'" />';
        $str .= '<meta property="og:image:width" content="1200" />';
        $str .= '<meta property="og:image:height" content="627" />';

        $str .= '<meta property="twitter:card" content="summary_large_image">';
        $str .= '<meta property="twitter:url" content="'.base_url().'p/'.$data[0]['share_id'].'">';
        $str .= '<meta property="twitter:title" content="'.$data[0]['share_ques'].'">';
        $str .= '<meta property="twitter:description" content="'.$data[0]['share_ans'].'">';
        $str .= '<meta property="twitter:image" content="'.$data[0]['share_image'].'">';

        $str .= '<link href="https://fonts.googleapis.com/css2?family=Mulish:wght@200;300;400;500;600;700;800;900&amp;display=swap" rel="stylesheet">';
        $str .= '<style>:root {--main-color:#7d49ab;}*,::after,::before{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}::-webkit-scrollbar{width:4px;height:4px}::-webkit-scrollbar-track{background-color:#f2f2f2;border-radius:10px}::-webkit-scrollbar-thumb{background-color:var(--main-color);border-radius:10px}body{background-color:#fff;font-family:Mulish,sans-serif;margin:0;font-size:14px}.cc_logo{text-align:center;margin-bottom:50px}.cc_logo>img{max-width:160px}.cc_redirect_wrapper{padding:10% 15px 6%;position:fixed;top:0;left:0;right:0;bottom:0;overflow:auto;background-image:url(https://commissioncloner.co/assets/frontend/images/redirect_bg.jpg);background-size:100%}.cc_redirect_box{max-width:800px;margin:0 auto;display:flex;align-items:flex-end}.cc_redirect_box>.cc_redirect_box_content{background-color:var(--main-color);padding:40px 20px;flex:1;width:100%;border-radius:8px;box-shadow:0 0 40px rgba(0,0,0,.1)}@keyframes anim_box{0%{background-color:#faf2ff}100%{background-color:#f2ddff}}.cc_redirect_box>.cc_redirect_box_content>h3{margin:0;font-size:24px;font-weight:900;color:#fff;margin-bottom:15px;text-align:center}.cc_redirect_box>.cc_redirect_box_content>h3>span.cc_dot{display:inline-block;transform-origin:center;margin:0 1px}.cc_redirect_box>.cc_redirect_box_content>h3>span.cc_heading_text{display:inline-block;transform-origin:center;margin:0 1px}.cc_redirect_box>.cc_redirect_box_content>h3>span.cc_dot:nth-child(3){animation-delay:.1s}.cc_redirect_box>.cc_redirect_box_content>h3>span.cc_dot:nth-child(4){animation-delay:.2s}@keyframes anim_dot{0%{transform:scale(0) translateY(10px)}100%{transform:scale(1) translateY(0)}}@keyframes anim_text{0%{letter-spacing:.5px}100%{letter-spacing:2px}}.cc_redirect_box>.cc_redirect_box_content>p{margin:0;color:#fff;font-weight:600;text-align:center}.cc_redirect_box>.cc_redirect_box_img{width:300px;-webkit-transform:translateX(-30%);-moz-transform:translateX(-30%);transform:translateX(-30%);display:none}.cc_redirect_box>.cc_redirect_box_img>svg{width:100%;height:auto;vertical-align:middle}.cc_redirect_loader{text-align:center;margin-bottom:30px}.cc_redirect_loader>img{max-width:50px}@media(max-width:920px){.cc_redirect_box{align-items:flex-end;flex-direction:column-reverse}.cc_redirect_box>.cc_redirect_box_img{-webkit-transform:none;-moz-transform:none;transform:none}}</style>';

        $str .= '</HEAD><BODY>';
        $str .= '<div class="cc_redirect_wrapper"><div class="cc_redirect_inner"><div class="cc_redirect_box"><div class="cc_redirect_box_content"><div class="cc_redirect_loader"> <img src="https://commissioncloner.co/assets/frontend/images/redirect_loader.png" alt=""></div><h3><span class="cc_heading_text">Redirecting in 3 Seconds to</span> <span class="cc_dot">.</span><span class="cc_dot">.</span><span class="cc_dot">.</span></h3><p>'.$data[0]['share_url'].'</p></div><div class="cc_redirect_box_img"> <svg width="428" height="362" viewBox="0 0 428 362" fill="none" xmlns="http://www.w3.org/2000/svg"> <g clip-path="url(#clip0)"> <g class="cc_man"> <path d="M63.4672 346.762L71.7705 349.087L84.6768 318.114L72.4221 314.682L63.4672 346.762Z" fill="#FFB8B8" /> <path d="M85.6292 361.295L59.5321 353.987L62.3511 343.888L79.3744 348.655C81.7809 349.329 83.8216 350.933 85.0475 353.114C86.2734 355.295 86.5841 357.874 85.9113 360.285L85.6292 361.295Z" fill="#2F2E41" /><path d="M162.517 353.276L171.139 353.275L175.239 319.964L162.514 319.965L162.517 353.276Z" fill="#FFB8B8" /> <path d="M187.768 361.293L160.67 361.295L160.669 350.809L178.345 350.807C179.583 350.807 180.808 351.051 181.951 351.525C183.094 351.999 184.133 352.694 185.008 353.571C185.883 354.447 186.577 355.487 187.05 356.632C187.524 357.777 187.768 359.004 187.768 360.243L187.768 361.293V361.293Z" fill="#2F2E41" /> <path d="M98.4457 214.982L78.6003 263.678L159.636 281.912L160.669 254.668L123.873 215.411L98.4457 214.982Z" fill="#B3B3B3" /> <path d="M146.763 212.287L110.083 197.248L106.818 175.679C105.856 169.374 107.358 162.941 111.011 157.717C114.664 152.494 120.186 148.882 126.43 147.633L131.282 146.657C135.268 145.857 139.388 146.045 143.285 147.202C147.182 148.36 150.738 150.453 153.644 153.3C156.49 156.024 158.619 159.412 159.839 163.161C161.06 166.91 161.335 170.904 160.639 174.785C160.091 178.111 158.744 181.253 156.715 183.942C145.192 199.035 146.671 211.582 146.688 211.707L146.763 212.287Z" fill="#7D49AB" /> <path d="M161.699 268.536L143.316 239.253L149.106 185.987L141.108 146.149L141.533 146.16C146.185 146.275 150.615 148.178 153.904 151.474C157.194 154.771 159.092 159.208 159.205 163.868L166.985 202.905L161.699 268.536Z" fill="#2F2E41" /> <path d="M162.118 346.979C161.344 346.978 160.593 346.709 159.994 346.217C159.395 345.725 158.984 345.041 158.831 344.28L150.777 304.168C149.306 296.819 146.536 289.792 142.598 283.419L119.874 246.599C119.761 246.416 119.599 246.268 119.407 246.17C119.216 246.073 119.001 246.031 118.786 246.048C118.572 246.065 118.366 246.141 118.192 246.267C118.018 246.394 117.883 246.566 117.8 246.765L80.4393 336.662C80.139 337.38 79.5993 337.972 78.9121 338.337C78.225 338.702 77.4328 338.817 76.6704 338.663L66.6899 336.625C65.8349 336.454 65.0804 335.955 64.5875 335.235C64.0946 334.514 63.9023 333.63 64.0516 332.769L72.1934 284.708C73.8543 274.912 76.6842 265.351 80.6224 256.231L108.196 192.401L148.888 205.787L151.573 234.327L170.375 279.928C171.674 283.077 172.451 286.418 172.674 289.818L176.148 342.521C176.202 343.4 175.91 344.266 175.336 344.933C174.761 345.601 173.949 346.017 173.072 346.093L162.395 346.968C162.302 346.975 162.21 346.979 162.118 346.979Z" fill="#2F2E41" /> <path d="M87.8865 281.595L74.986 269.33L99.3661 175.164C100.913 169.244 103.813 163.765 107.837 159.16C111.862 154.555 116.9 150.95 122.554 148.631L123.033 148.436L121.73 205.747L87.8865 281.595Z" fill="#2F2E41" /> <g class="cc_face"> <path d="M142.413 139.124C151.389 134.209 154.688 122.935 149.781 113.944C144.874 104.953 133.619 101.648 124.642 106.563C115.666 111.478 112.367 122.752 117.274 131.743C122.181 140.734 133.436 144.039 142.413 139.124Z" fill="#FFB8B8" /> <path d="M129.211 141.331C124.634 137.363 123.243 129.962 126.047 124.506C128.851 119.049 135.556 116.112 141.289 117.828C146.689 119.444 152.827 114.052 152.169 108.271C151.511 102.489 144.331 98.7225 139.442 101.595C135.739 100.107 131.686 99.7211 127.77 100.485C123.854 101.249 120.242 103.13 117.368 105.901C111.624 111.537 109.445 120.751 112.023 128.499C114.602 136.247 121.8 142.113 129.211 141.331Z" fill="#2F2E41" /> </g> <path d="M113.006 292.124C112.78 292.211 112.545 292.272 112.305 292.306L82.8528 296.424C82.1403 296.526 81.4143 296.382 80.7942 296.016C80.1741 295.65 79.6969 295.083 79.441 294.409L54.0894 228.335C53.9253 227.907 53.8551 227.449 53.8837 226.992C53.9123 226.534 54.0391 226.088 54.2553 225.685C54.4714 225.281 54.772 224.928 55.1365 224.651C55.501 224.374 55.9208 224.179 56.3674 224.079L56.3675 224.079L84.0645 217.888C84.2783 217.84 84.4849 217.765 84.6792 217.663L111.618 203.555C111.827 203.446 112.046 203.361 112.273 203.3L141.92 195.384C142.679 195.18 143.487 195.265 144.188 195.622C144.888 195.98 145.431 196.585 145.712 197.321L167.817 254.934C168.011 255.435 168.074 255.979 168.001 256.512C167.928 257.045 167.721 257.551 167.398 257.982L159.754 268.264C159.394 268.748 158.905 269.12 158.342 269.336L141.635 275.767C141.515 275.813 141.399 275.869 141.288 275.933L113.448 291.914C113.307 291.996 113.159 292.066 113.006 292.124V292.124Z" fill="white" /> <path d="M126.709 204.192L122.944 205.198L112.968 207.863L112.95 207.867L99.2912 215.02L94.2223 217.676L94.22 217.677L86.607 221.663L86.3982 221.71L78.4896 223.477L74.6674 224.333L59.0779 227.817L83.5515 291.603L99.6163 289.358L103.555 288.806L111.951 287.631L112.048 287.618L139.026 272.131L155.441 265.812L162.935 255.732L141.631 200.208L126.709 204.192Z" fill="#E6E6E6" /> <path d="M145.141 209.356L63.9814 240.597L65.3713 244.22L146.531 212.978L145.141 209.356Z" fill="white" /> <path d="M149.774 221.43L68.6142 252.671L70.0041 256.294L151.164 225.053L149.774 221.43Z" fill="white" /> <path d="M159.132 245.821L77.9725 277.062L79.3624 280.685L160.522 249.444L159.132 245.821Z" fill="white" /> <path d="M126.709 204.192L151.007 267.519L147.391 268.911L122.944 205.198L126.709 204.192Z" fill="white" /> <path d="M99.2913 215.021L94.3022 228.925L92.5721 233.749L88.5366 245.003L87.6719 247.409L86.8065 249.826L85.667 253L77.4879 275.8L75.3615 270.257L82.0305 251.665L83.5392 247.456L83.7605 246.841L85.5448 241.864L87.7961 235.588L89.5261 230.764L94.22 217.677L94.2221 217.676L99.2913 215.021Z" fill="white" /> <path opacity="0.1" d="M139.615 271.904L139.026 272.131L112.048 287.618L111.951 287.631L86.398 221.71L86.607 221.663L94.2201 217.677L94.2221 217.676L99.2914 215.021L112.95 207.867L112.968 207.863L139.615 271.904Z" fill="black" /> <path d="M113.128 292.442C112.878 292.538 112.618 292.606 112.352 292.643L82.8996 296.761C82.1111 296.874 81.3078 296.714 80.6216 296.309C79.9355 295.904 79.4074 295.277 79.1242 294.532L53.7726 228.457C53.591 227.984 53.5134 227.477 53.5451 226.971C53.5768 226.464 53.717 225.971 53.9562 225.524C54.1955 225.077 54.5281 224.687 54.9314 224.381C55.3348 224.074 55.7993 223.858 56.2935 223.748L83.9904 217.557C84.1753 217.515 84.3539 217.449 84.522 217.362L111.461 203.254C111.691 203.133 111.934 203.039 112.186 202.972L141.833 195.056C142.673 194.83 143.567 194.924 144.342 195.32C145.117 195.715 145.718 196.385 146.028 197.199L168.133 254.812C168.348 255.367 168.418 255.968 168.338 256.558C168.257 257.149 168.027 257.708 167.671 258.185L160.026 268.468C159.628 269.003 159.086 269.415 158.464 269.654L141.757 276.085C141.653 276.125 141.553 276.173 141.457 276.228L113.617 292.209C113.46 292.299 113.297 292.377 113.128 292.442V292.442ZM56.2836 225.167C55.7477 225.374 55.3157 225.785 55.0824 226.31C54.8492 226.836 54.8338 227.433 55.0397 227.969L80.3913 294.044C80.5653 294.502 80.8899 294.888 81.3117 295.137C81.7335 295.386 82.2273 295.483 82.712 295.414L112.165 291.296C112.438 291.257 112.702 291.167 112.942 291.03L140.782 275.048C140.939 274.958 141.102 274.881 141.27 274.816L157.977 268.385C158.36 268.237 158.693 267.985 158.937 267.656L166.582 257.373C166.801 257.08 166.942 256.736 166.992 256.373C167.042 256.01 166.998 255.641 166.866 255.3L144.761 197.687C144.57 197.186 144.201 196.775 143.725 196.531C143.248 196.288 142.699 196.23 142.183 196.369L112.536 204.285C112.381 204.327 112.232 204.385 112.091 204.459L85.1509 218.567C84.8776 218.709 84.587 218.816 84.2864 218.884L56.5893 225.075C56.4852 225.098 56.383 225.129 56.2836 225.167Z" fill="#E6E6E6" /> <path d="M78.4897 223.477L103.555 288.806L99.6164 289.357L74.6672 224.332L78.4897 223.477Z" fill="white" /> <path d="M85.6987 249.846C86.6972 249.846 87.5067 249.035 87.5067 248.035C87.5067 247.035 86.6972 246.224 85.6987 246.224C84.7001 246.224 83.8906 247.035 83.8906 248.035C83.8906 249.035 84.7001 249.846 85.6987 249.846Z" fill="#3F3D56" /> <path d="M149.806 251.777C150.805 251.777 151.614 250.966 151.614 249.966C151.614 248.966 150.805 248.155 149.806 248.155C148.808 248.155 147.998 248.966 147.998 249.966C147.998 250.966 148.808 251.777 149.806 251.777Z" fill="#7D49AB" /> <path d="M150.538 217.256C152.59 222.605 150.121 240.329 149.252 246.018C149.225 246.198 149.15 246.368 149.036 246.511C148.922 246.653 148.772 246.762 148.602 246.828C148.432 246.893 148.247 246.912 148.068 246.883C147.888 246.854 147.719 246.778 147.578 246.663C143.129 243.02 129.444 231.514 127.392 226.166C126.808 224.644 126.529 223.021 126.571 221.391C126.613 219.761 126.975 218.155 127.637 216.665C128.299 215.175 129.247 213.83 130.427 212.707C131.608 211.584 132.998 210.705 134.518 210.12C136.037 209.535 137.657 209.255 139.285 209.297C140.912 209.339 142.516 209.702 144.004 210.365C145.491 211.027 146.834 211.977 147.955 213.16C149.076 214.342 149.954 215.734 150.538 217.256Z" fill="#7D49AB" /> <path d="M138.965 228.438C142.674 228.438 145.681 225.426 145.681 221.711C145.681 217.996 142.674 214.984 138.965 214.984C135.256 214.984 132.25 217.996 132.25 221.711C132.25 225.426 135.256 228.438 138.965 228.438Z" fill="white" /> <path d="M130.339 207.197C130.611 206.198 131.098 205.271 131.766 204.48C132.434 203.69 133.268 203.057 134.207 202.624C135.146 202.191 136.169 201.97 137.203 201.976C138.236 201.982 139.256 202.215 140.191 202.658L152.179 191.803L160.542 197.492L143.397 212.583C142.549 214.105 141.173 215.264 139.529 215.838C137.886 216.413 136.089 216.363 134.48 215.699C132.87 215.035 131.56 213.803 130.796 212.236C130.033 210.669 129.87 208.876 130.339 207.197V207.197Z" fill="#FFB8B8" /> <path d="M149.656 210.739L140.258 197.965L161.683 184.231L146.327 162.284C145.072 160.491 144.522 158.297 144.782 156.123C145.042 153.949 146.094 151.947 147.735 150.501C149.377 149.055 151.494 148.267 153.68 148.287C155.866 148.307 157.968 149.134 159.582 150.61L178.809 168.181C180.641 169.855 182.062 171.929 182.962 174.243C183.861 176.557 184.216 179.047 183.997 181.521C183.778 183.994 182.993 186.384 181.701 188.503C180.409 190.623 178.646 192.415 176.549 193.74L149.656 210.739Z" fill="#2F2E41" /> <g class="cc_left_hand"> <path d="M76.0291 244.258C76.8786 243.667 77.5886 242.898 78.109 242.003C78.6294 241.108 78.9477 240.11 79.0413 239.079C79.1349 238.047 79.0016 237.008 78.6509 236.034C78.3001 235.06 77.7403 234.174 77.011 233.44L83.2232 218.497L75.0776 212.501L66.6008 233.727C65.4508 235.036 64.8202 236.722 64.8284 238.466C64.8366 240.209 65.4831 241.889 66.6452 243.187C67.8074 244.485 69.4046 245.311 71.1341 245.508C72.8636 245.706 74.6053 245.261 76.0291 244.258V244.258Z" fill="#FFB8B8" /> <path d="M80.2265 229.084L65.535 225.657L76.4831 194.035C78.3697 188.579 81.1531 183.477 84.7182 178.94L102.579 156.19C104.213 154.109 106.603 152.762 109.226 152.443C111.85 152.123 114.493 152.859 116.576 154.488C118.659 156.116 120.013 158.506 120.341 161.133C120.669 163.759 119.944 166.409 118.325 168.501L98.5061 194.122L80.2265 229.084Z" fill="#2F2E41" /> </g> </g><path d="M259.266 362H0.678706C0.498702 362 0.32606 361.929 0.198778 361.801C0.0714955 361.674 0 361.501 0 361.32C0 361.14 0.0714955 360.967 0.198778 360.84C0.32606 360.712 0.498702 360.641 0.678706 360.641H259.266C259.446 360.641 259.618 360.712 259.746 360.84C259.873 360.967 259.944 361.14 259.944 361.32C259.944 361.501 259.873 361.674 259.746 361.801C259.618 361.929 259.446 362 259.266 362Z" fill="#CCCCCC" /> <path d="M359.57 361.66H353.462V3.05915C353.462 2.24782 353.783 1.46971 354.356 0.896008C354.929 0.322306 355.706 0 356.516 0C357.326 0 358.103 0.322306 358.675 0.896008C359.248 1.46971 359.57 2.24782 359.57 3.05915V361.66Z" fill="#E6E6E6" /> <path d="M403.83 362H308.811C308.631 362 308.459 361.929 308.331 361.801C308.204 361.674 308.133 361.501 308.133 361.32C308.133 361.14 308.204 360.967 308.331 360.84C308.459 360.712 308.631 360.641 308.811 360.641H403.83C404.01 360.641 404.183 360.712 404.31 360.84C404.437 360.967 404.509 361.14 404.509 361.32C404.509 361.501 404.437 361.674 404.31 361.801C404.183 361.929 404.01 362 403.83 362Z" fill="#CCCCCC" /> <path d="M401.955 46.9072H313.079C312.269 46.9063 311.493 46.5837 310.92 46.0102C310.347 45.4367 310.025 44.6591 310.024 43.8481V18.0152C310.025 17.2042 310.347 16.4266 310.92 15.8531C311.493 15.2796 312.269 14.957 313.079 14.9561H401.962C402.483 14.9564 402.995 15.09 403.45 15.3441L426.434 28.1918C426.908 28.4566 427.303 28.843 427.578 29.3113C427.853 29.7796 427.999 30.3129 428 30.8563C428.001 31.3997 427.858 31.9337 427.585 32.4032C427.312 32.8727 426.918 33.2609 426.446 33.5277L403.455 46.5129C402.997 46.7711 402.481 46.9069 401.955 46.9072V46.9072Z" fill="#7D49AB" /> <path d="M393.845 102.651H304.968C304.443 102.651 303.926 102.515 303.468 102.257L280.477 89.2719C280.005 89.005 279.612 88.6168 279.338 88.1473C279.065 87.6778 278.922 87.1439 278.923 86.6005C278.924 86.0571 279.07 85.5238 279.345 85.0555C279.62 84.5871 280.015 84.2007 280.489 83.9359L303.473 71.0882C303.928 70.8341 304.441 70.7006 304.962 70.7002H393.845C394.654 70.7011 395.431 71.0237 396.003 71.5972C396.576 72.1707 396.898 72.9483 396.899 73.7593V99.5922C396.898 100.403 396.576 101.181 396.003 101.754C395.431 102.328 394.654 102.65 393.845 102.651Z" fill="#E6E6E6" /> <path d="M394.184 157.376H305.307C304.782 157.376 304.265 157.24 303.807 156.982L280.817 143.996C280.344 143.73 279.951 143.341 279.678 142.872C279.405 142.402 279.261 141.868 279.262 141.325C279.264 140.782 279.409 140.248 279.685 139.78C279.96 139.312 280.355 138.925 280.828 138.661L303.813 125.813C304.268 125.559 304.78 125.425 305.301 125.425H394.184C394.994 125.426 395.77 125.748 396.343 126.322C396.915 126.895 397.237 127.673 397.238 128.484V154.317C397.237 155.128 396.915 155.905 396.343 156.479C395.77 157.052 394.994 157.375 394.184 157.376V157.376Z" fill="#E6E6E6" /></g> <defs> <clipPath id="clip0"> <rect width="428" height="362" fill="white" /> </clipPath> </defs> </svg></div></div></div></div>';
        $str .= '</BODY>';
        $str .= '<script>setTimeout(function(){ window.location.replace("'.$data[0]['share_url'].'"); }, 3000);</script>';
        $str .= '</HTML>';

        echo $str;
    }
}
?>